% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/s3methods.R
\name{ggplot_gtable.ggplot_plus_built}
\alias{ggplot_gtable.ggplot_plus_built}
\title{Gtable Method For Ggplot.Plus}
\usage{
\method{ggplot_gtable}{ggplot_plus_built}(data)
}
\arguments{
\item{data}{A built plot object (the return value of
\code{ggplot2::ggplot_build()}), carrying class \code{"ggplot_plus_built"}.}
}
\value{
A \code{gtable} ready to draw.
}
\description{
This S3 method runs after the build step and before drawing. If the user
called \code{yaxis_title_plus()} (i.e., y-axis intents are present), it:
}
\details{
\itemize{
\item inserts a brand-new row above the top panel (or below the bottom panel)
and renders the y-axis title horizontally there (or the x-axis title when
\code{coord_flip()} is used),
\item styles the title using the plot’s theme (\code{axis.title.y} / \code{axis.title.x})
via \code{calc_element()}, and
\item optionally moves any top legends down into the new title row, collapsing
any now-empty spacer rows.
}

Default x/y title grobs are deleted to avoid double-rendering.

\strong{Title text source.} We prefer the trained scale’s \code{name}. If that’s not
set, we fall back to \code{plot$labels[[axis]]}. As a last resort, we use a
placeholder to nudge users toward a \verb{scale_*()} or \code{labs()} call.

\strong{Row/column targeting.} We find the panel band rows and the left axis
column dynamically from the gtable layout (no hard-coded row numbers),
then insert a new row and place the title in the leftmost axis column. Using
a new row ensures no easy collisions with existing plot elements.

\strong{coord_flip().} When \code{coord_flip()} is active, we treat the \emph{x} title as
the “y title” to move, so the horizontal label still lands in the correct,
logical place for the flipped orientation.
}
\examples{
library(ggplot2)
ggplot2::ggplot(mtcars, ggplot2::aes(wt, mpg)) +
  geom_plus("point") +
  yaxis_title_plus("top")                 # move y title to a new top row

ggplot2::ggplot(mtcars, ggplot2::aes(wt, mpg, colour = factor(cyl))) +
  geom_plus("point") +
  theme_plus(legend_pos = "top") +
  yaxis_title_plus("top", move_top_legend_down = TRUE)

}
