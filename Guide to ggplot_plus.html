<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Alex Bajcz">

<title>Guide to ggplot_plus</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Guide to ggplot_plus_files/libs/clipboard/clipboard.min.js"></script>
<script src="Guide to ggplot_plus_files/libs/quarto-html/quarto.js"></script>
<script src="Guide to ggplot_plus_files/libs/quarto-html/popper.min.js"></script>
<script src="Guide to ggplot_plus_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Guide to ggplot_plus_files/libs/quarto-html/anchor.min.js"></script>
<link href="Guide to ggplot_plus_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Guide to ggplot_plus_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Guide to ggplot_plus_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Guide to ggplot_plus_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Guide to ggplot_plus_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Guide to ggplot_plus</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Alex Bajcz </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="preface" class="level2">
<h2 class="anchored" data-anchor-id="preface">Preface</h2>
<p>This guide introduces the <code>ggplot_plus</code> collection—tools developed by Dr.&nbsp;Alex Bajcz, Quantitative Ecologist at the Minnesota Aquatic Invasive Species Research Center (MAISRC) at the University of Minnesota. It is not intended to be exhaustive nor prescriptive. Rather, it offers a hands-on overview of what these tools can do to enhance a standard <code>ggplot2</code> graphic.</p>
<p>At its core, <code>ggplot_plus</code> reimagines the default styling and aesthetics of <code>ggplot2</code>. While a typical one-line <code>ggplot</code> command produces a serviceable graphic, that graphic will often fall short of best practices in data visualization and graph design in a number of respects, including accessibility.</p>
<p>All these design shortcomings can of course be remedied using base <code>ggplot2</code> features—including its <code>theme</code>, <code>scale</code>, and <code>geom</code> functions—but doing so requires substantial knowledge that many users lack and would find difficult to acquire and time-consuming to leverage. This toolkit was built to help users of all skill levels produce clearer, more polished, and more accessible graphics “out of the box,” while still allowing full subsequent customization and experimentation.</p>
<p>Accessibility is a key priority. Many <code>ggplot_plus</code> defaults aim to meet basic accessibility standards. Where accessibility is especially relevant, this guide will call it out explicitly.</p>
<p><strong>To be clear, <code>ggplot_plus</code> is not a substitute for thoughtful graph design, iterative refinement, or visual storytelling.</strong> It is a starting point—a set of evidence-informed defaults to help you build better plots faster. If you don’t like how something looks, change it! You’re encouraged to seek outside opinions, honor the expectations of your audience, and adjust accordingly.</p>
<p>While the design choices baked into these tools ultimate reflect Dr.&nbsp;Bajcz’s professional judgment, they are grounded in a thorough review of the last two decades of the data visualization literature, so they do not primarily reflect his personal opinions about good design.</p>
<p>Without further ado, let’s see the tools contained within this collection in action!</p>
</section>
<section id="loading-packages-and-files" class="level2">
<h2 class="anchored" data-anchor-id="loading-packages-and-files">Loading packages and files</h2>
<p>This package relies only on the tools contained within the <code>ggplot2</code> and <code>dplyr</code> packages by design, so those are the only packages that must be loaded:</p>
<p>At time of writing, there are six sets of tools in the <code>ggplot_plus</code> collection to load:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>files <span class="ot">=</span> <span class="fu">list.files</span>(<span class="at">pattern =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">.R$"</span>) <span class="co">#FIND ALL R SCRIPT FILES IN THE CURRENT DIRECTORY.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>files <span class="ot">=</span> files[<span class="sc">!</span>files <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ggplot_plus_demos.R"</span>)] <span class="co">#NOT THIS FILE</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">invisible</span>(<span class="fu">lapply</span>(files, source)) <span class="co">#SOURCE ALL FILES</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="a-standard-ggplot-for-comparison" class="level2">
<h2 class="anchored" data-anchor-id="a-standard-ggplot-for-comparison">A standard <code>ggplot</code> for comparison</h2>
<p>Let’s start by creating and examining a <code>ggplot</code> produced by a simple <code>ggplot2</code> command. The following code will produce a scatterplot of petal length vs.&nbsp;sepal length data for iris flowers from three different species (these data are found in the <code>iris</code> data set automatically available in every installation of R). The points will be filled with different colors for each different species:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="co">#&lt;--THE DATA SET</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, <span class="co">#&lt;--MAPPING OUR AESTHETICS, I.E., SAYING "*THIS* VARIABLE IN THE DATA SET SHOULD USE *THAT* VISUAL CHANNEL IN THE GRAPH". HERE, WE'RE SAYING MAP PETAL LENGTH TO HORIZONTAL POSITION AND SEPAL LENGTH TO VERTICAL POSITION.</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> Species)) <span class="co">#&lt;--IN GGPLOT2, YOU CAN MAP AESTHETICS "GLOBALLY" INSIDE ggplot(), WHERE THEY WILL APPLY TO EVERY GEOMETRY, OR "LOCALLY" INSIDE A geom_*() FUNCTION, WHERE THEY WILL ONLY APPLY TO THAT GEOMETRY. A GEOMETRY IS A WAY OF REPRESENTING DATA--HERE, POINTS FOR A SCATTERPLOT. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/basic%20iris%20scatter-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This is a nice, albeit basic, graph. It’d be perfectly serviceable for exploration or sharing with peers, but, for publication, it doesn’t meet a number of data visualization best practices. These include:</p>
<ol type="1">
<li><p>The text, especially that of the legend and axes labels, is generally too small for easy reading by those with visual impairments. The rule of thumb is that someone with “normal” vision should feel like text is <em>almost</em> too big for it to be big enough.</p></li>
<li><p>Furthermore, the data geometries (points) themselves are on the small side to be easily parsed by someone with visual impairment. The same rule of thumb applies to these elements as for text.</p></li>
<li><p>Additionally, the default color palette for <code>ggplot2</code> is a “rainbow” palette. These kinds of color palettes have a range of issues but, in this particular case, they lack variance in <strong>luminance</strong> (lightness vs.&nbsp;darkness), so a person lacking color vision entirely would not be able to tell the colors apart. Someone with red-green colorblindness would also not be able to tell the red and green shades here apart either.</p></li>
<li><p>A big accessibility issue in design with respect to color is <strong>contrast</strong>–how easily nearby objects are differentiated from each other and also how easily foreground and background objects are differentiated. Here, contrast between the points (foreground objects) and the background (the gray-filled <code>plot.background</code>) is probably sufficient for those with visual impairments, but it would be enhanced if the points were darker in color and/or the background were lighter.</p></li>
<li><p>For those with visual or cognitive impairments, void space (empty space that does not contain information) between key elements is valuable. Default <code>ggplot</code>s tend to have limited space between some sets of key elements, including (but not limited to):</p>
<ol type="1">
<li><p>Axis titles and their corresponding axis labels.</p></li>
<li><p>Legend key elements.</p></li>
<li><p>Axis labels on densely labeled axes (not an issue in this graph).</p></li>
</ol>
<p>If possible, key elements should be spaced to make it easier to parse distinct elements from each other.</p></li>
<li><p>Axis and legend titles and labels here are “raw,” i.e., they are identical to the column names in the original data set. This means they are designed for computer- rather than human-readability. These should be reformatted to be more immediately human-intuitive and conform to normal spelling, punctuation, and capitalization rules. They should also include units, if relevant.</p></li>
<li><p>Empirical research on <strong>gridlines</strong> (the criss-crossing white lines in the background of the plot) is mixed.<br>
<br>
On the one hand, <strong>gridlines</strong> increase cognitive load and can increase the length of time it takes readers to successfully interpret a graph. They can also decrease contrast between key elements. They also convey much less vital information when they run in directions mapped to categorical (text-based) data (as opposed to numeric data).<br>
<br>
On the other hand, <strong>gridlines</strong> are intuitively understood by those with little to no graph-reading experience, so they can be a scaffold for a novice’s understanding. Plus, they can increase the speed and accuracy with which readers discern exact values of data elements.<br>
<br>
However, considerable research has shown that graphs are not the best way to convey exact values to readers (tables, text, and direct sharing of data sets are all superior). Graphs are better-designed for “vibes” than precision! Moreover, even when gridlines are valuable, research suggests they can be faint or infrequent. In the graph above, they are probably more frequent than they need to be, though this could be debated.</p></li>
<li><p>When vertical and/or horizontal position is mapped to numeric variables, these axes essentially represent number lines. Readers expect such lines to be graduated (labeled) not just regularly throughout but also at both ends. In the graph above, the x axis is missing a label near either end, and the y axis is also missing one at its lower end. This looks “incomplete,” and also may increase the reading time of the graph while reducing comprehension.</p></li>
<li><p><strong>Overplotting</strong> occurs whenever data elements overlap in value enough to be plotted partially or wholly overtop of one another. When this occurs, the reader cannot accurately evaluate <strong>density</strong>–they cannot determine whether one point exists in a region or more than one.</p></li>
<li><p>No human language reads at a 90 degree angle from horizontal. Substantial research has shown that it takes considerably longer to accurately read text at this angle vs.&nbsp;horizontal. Such text has also been shown to be difficult to read for readers who have certain visual or cognitive impairments (e.g., dyslexia), those with certain physical disabilities or technological limitations that prevent them from tipping the text horizontal to make it easier to read, and those for whom the text is not in their native language.<br>
<br>
As such, the default y axis title’s vertical orientation is not ideal. It is also less prominently located (in the left plot margin) than it could be, given that a graph is often “about” its y axis (given that vertical position often corresponds to variance in the <strong>dependent variable</strong>).</p></li>
<li><p>The axis tick marks are quite small. For them to be easily noticed and distinguished from possible data elements, they could be more prominent.</p></li>
<li><p>The legend’s position is not ideal in a couple of respects. First, it’s space-inefficient, as it forces a large void space to its top and bottom. Second, it is not in a prominent location relative to how most readers actually read graphs, such that they are likely to encounter it late, which may mean they struggle more to integrate its contents with their understanding of the rest of the graph. Ideally, the need for legend would be eliminated somehow (such as through direct labeling within the plotting area), but, otherwise, the legend could be placed somewhere more efficient and prominent.</p></li>
</ol>
<p>This isn’t meant to be an exhaustive list of design issues with the graph above, but they should provide a sense of the diverse array of design choices that someone could need to remedy if trying to prepare a <code>ggplot</code> for publication.</p>
</section>
<section id="colorblind-friendly-palettes" class="level2">
<h2 class="anchored" data-anchor-id="colorblind-friendly-palettes">Colorblind-friendly palettes</h2>
<p>Conveniently, the <code>viridis</code> package, bundled with <code>ggplot2</code>, comes with eight colorblind-friendly color palettes we can leverage. These palettes vary not just hue (what is often thought of as “color”, i.e., yellow, red, green, etc.) but also luminance (and sometimes also <strong>saturation</strong>, which is how “gray” a color is). This double-variance enables colors to be distinguishable regardless of vision impairment or viewing technology.</p>
<p>The <code>ggplot_plus</code> collection includes a function, <code>palettes_plus()</code>, that is a convenience function providing access to the default <code>viridis</code> palette for whenever the <code>color</code> (or, equivalently, <code>colour</code>) or <code>fill</code> channels are used:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">palettes_plus</span>() <span class="co">#&lt;--CALL ONCE PER SESSION.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SAME GRAPH AS BEFORE</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> Species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/palettes%20plus-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>While, by default, <code>viridis</code> runs from a dark purple to a light yellow through blue, green, and teal, <code>palettes_plus()</code> defaults to excluding the dark purple range, as this can lack contrast against black, and the light yellow range, as this can lack contrast against white. As such, the colors shown above would be distinguishable from each other and from the background in a wide range of circumstances.</p>
<p>However, either of these settings can be adjusted: the <code>begin</code> and <code>end</code> parameters of <code>palettes_plus()</code> can run from <code>0</code> to <code>1</code>. Settings <code>begin</code> closer to 0 will include more of the dark purple range, whereas setting <code>end</code> closer to <code>1</code> will include more of the light yellow range:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">palettes_plus</span>(<span class="at">begin =</span> <span class="dv">0</span>) <span class="co">#&lt;--ALLOW DARK PURPLE RANGE.</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SAME GRAPH AS BEFORE</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> Species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/bringing%20in%20dark%20purple-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Here, dark purple contrasts well against the background, whereas light yellow would not.</p>
<p>There are other color palettes available, though. These are coded “A” through “H” for <code>magma</code>, <code>inferno</code>, <code>plasma</code>, <code>viridis</code>, <code>cividis</code>, <code>rocket</code>, <code>mako</code>, and <code>turbo</code>, respectively. If you are looking for a more accessible “rainbow” palette, <code>turbo</code> is a good choice:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">palettes_plus</span>(<span class="at">begin =</span> <span class="dv">0</span>, <span class="at">end =</span> <span class="dv">1</span>, <span class="at">palette =</span> <span class="st">"H"</span>) <span class="co">#&lt;--SWITCH TO TURBO PALETTE FOR ITS FULL RANGE. </span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SAME GRAPH AS BEFORE</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> Species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/turbo-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It should be noted that, in terms of luminance, <code>turbo</code> is bi-directional and thus has two “dark” regions that would not be distinguishable for those who are totally or partially colorblind (&lt;1% of the human population). If that is of concern, you could restrict either <code>begin</code> or <code>end</code> to <code>0.5</code> to exclude one half of the palette and use just its “blue” or “red” ends.</p>
<p><code>palettes_plus()</code> is designed to be called only as often as needed–once called, it will override <code>ggplot2</code>’s default choice of color palette for all subsequent graphs. Call it once per session, and only call it again if you want to change something. For now, we’ll return to a <code>viridis</code> palette that excludes the purple region.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">palettes_plus</span>(<span class="at">begin =</span> <span class="fl">0.28</span>, <span class="at">end =</span> <span class="dv">1</span>, <span class="at">palette =</span> <span class="st">"D"</span>) <span class="co">#&lt;--RESET TO VIRIDIS AND NORMAL RESTRICTIONS</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This leaves us with a graph that has light yellow points against a light gray background, which lacks contrast, but we’ll fix that issue in a moment:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#SAME GRAPH AS BEFORE</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> Species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/same%20graph-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="geometries-with-improved-defaults" class="level2">
<h2 class="anchored" data-anchor-id="geometries-with-improved-defaults">Geometries with improved defaults</h2>
<p>One of <code>ggplot_plus</code>’s primary tools is <code>geom_plus()</code>. This function is meant to replace most other <code>geom_*()</code> function calls you’d typically include in a <code>ggplot</code> command string. <code>geom_plus()</code> has one required input, <code>geom</code>, which must either be first or named. It corresponds to the string that would follow <code>_</code> in whatever <code>geom</code> you were trying to call (i.e., “point” for <code>geom_point()</code>, “line” for <code>geom_line()</code>, “bar” for <code>geom_bar()</code>, etc.).</p>
<p>So, to use this function to make our scatterplot, we can simply replace <code>geom_point()</code> with <code>geom_plus(geom = "point")</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, <span class="co">#&lt;--CHANGED FUNCTION, ADDED GEOM INPUT</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">color =</span> Species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/geom%20plus-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The fundamental purpose of <code>geom_plus()</code> is to override some of <code>ggplot2</code>’s default geometry parameters to address some of the design concerns raised earlier.</p>
<p>In this case, <code>geom_plus</code> made the points larger. It also switched their default shape to <code>21</code> from <code>16</code>. This is significant because the latter has only a <code>color</code> aesthetic, whereas the former has separate <code>color</code> and <code>fill</code> aesthetics for its <strong>stroke</strong> (outline) and interior regions, respectively. This allows us to specify a <code>"transparent"</code> fill by default to make the circles hollow. As a result, areas of partial overlap are discernible (though total overlap would still not be).</p>
<p>If we switch <code>species</code> from being mapped to <code>color</code> to being mapped to <code>fill</code>, <code>geom_plus()</code> defaults to a <code>"black"</code> stroke that resolves the contrast issue between the yellow points and the gray background:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species)) <span class="co">#&lt;--CHANGED TO FILL AESTHETIC</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/fill%20instead-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Because our eyes will now compare the yellow to the black immediately next to it instead of to the gray behind it, this doesn’t have the contrast problem we had with simple monochromatic points.</p>
<p>Dark purple wouldn’t contrast well against black, but since the point strokes don’t convey information directly, this isn’t a problem, so if we prefer it, we can restore the purple end of the spectrum to have more color options available:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">palettes_plus</span>(<span class="at">begin =</span> <span class="dv">0</span>, <span class="at">end =</span> <span class="dv">1</span>) <span class="co">#&lt;--RESTORE PURPLE </span><span class="re">END</span><span class="co"> OF COLOR RANGE AND RETAIN YELLOW RANGE (WHICH, BY DEFAULT, WOULD BE CUT OFF).</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">#SAME GRAPH AS BEFORE</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/restore%20purple-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>So, a user has two options when they want to use color for a plot like this one:</p>
<ol type="1">
<li><p>Use transparent fill and map stroke color to a discrete variable like <code>species</code>, favoring darker colors for contrast with the background, and allowing partial overlaps to be directly visible.</p></li>
<li><p>Use dark stroke colors against a light background and map fill color to the discrete variable.</p></li>
</ol>
<p>In the latter case, overplotting is still an issue. We can address it the “usual” way, which is to make the points semi-transparent so that points that stack on top of one another “bleed through” each other and result in a darker point (colors will “blend” as well, if applicable):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="co">#&lt;--MAKE POINTS MOSTLY TRANSPARENT. 0 IS TOTALLY CLEAR, AND 1 IS TOTALLY OPAQUE.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/using%20alpha-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This does have the consequence of dimming the black strokes as well, so keep that in mind from a contrast perspective.</p>
<section id="detour-mapping-visual-channels-in-ggplot2-a-review" class="level3">
<h3 class="anchored" data-anchor-id="detour-mapping-visual-channels-in-ggplot2-a-review">Detour: Mapping visual channels in <code>ggplot2</code> (a review)</h3>
<p>In <code>ggplot2</code>, you can set the aesthetics of your graph’s visual channels in three (partially overlapping) ways:</p>
<ol type="1">
<li><p>You can map a visual channel (like x axis position) to a variable in your data set globally inside of <code>aes()</code> inside of <code>ggplot()</code>. It’ll then apply to every geometry added to the plot.</p></li>
<li><p>You can map a visual channel to a variable in your data set locally inside of <code>aes()</code> inside of your <code>geom_*()</code> function. It’ll then apply only to that geometry and not others (e.g., you could have colored points but not colored lines).</p></li>
<li><p>You can also set a visual channel to a constant, either inside of <code>aes()</code> in either of the two places listed above or outside of <code>aes()</code> inside of your <code>geom_*()</code> function. Depending on where you do this, it’ll either apply to every geometry added to the plot or just one. For example, you can set <code>size = 5</code> to make all aspects of your visual channels with a size parameter have a size of 5.</p></li>
</ol>
<p>This is one of the most confusing aspects of using <code>ggplot2</code> for beginning users, so if this is tricky to understand, that’s understandable. Let’s see this distinction with a couple of graphs. First, let’s convert our plot to a boxplot with <strong>jittered</strong> (randomly moved a small distance) points plotted overtop:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#NEW PLOT</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Species, <span class="co">#&lt;--NOW, JUST SPECIES, A DISCRETE VARIABLE </span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"boxplot"</span>) <span class="sc">+</span> <span class="co">#&lt;--A NEW GEOM ADDED TO MAKE A BOXPLOT</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"jitter"</span>, <span class="co">#&lt;--SAME POINTS AS BEFORE EXCEPT NOW JITTERED. OTHERWISE, THEY'D BE OVERPLOTTED A LOT.</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Scale for shape is already present.
Adding another scale for shape, which will replace the existing scale.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/understanding%20mapping-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>In the above example:</p>
<ul>
<li><p>We map x and y axis position to two variables in our data set globally, inside of <code>ggplot()</code>’s mapping input using <code>aes()</code>. Thus, for both our jittered points and our boxplots, <code>x</code> is mapped to <code>Species</code> and <code>y</code> is mapped to <code>Sepal.Length</code>.</p></li>
<li><p>We map <code>fill</code> to <code>Species</code> too, using <code>aes()</code>, but we do so only inside of the <code>geom_plus()</code> call that builds our jittered points, so that mapping <em>only</em> applies to that geometry (our boxplots are not also filled according to species).</p></li>
<li><p>We map <code>alpha</code> (transparency) to a constant value of <code>0.2</code>, again only locally inside of one of our geometries. This means it applies to every element of that geometry, but only to elements of that geometry.</p></li>
</ul>
<p>Mapping visual channels locally takes precedence over mapping them globally, so if you map the same channel (e.g., <code>fill</code>) to 2+ values such that there are conflicts, the local settings will win locally. Also, if you (likely accidentally) map a channel to both a variable and to a constant value, usually, the constant value will win.</p>
<p>The above describes how visual channel settings work in base <code>ggplot2</code>. Its reviewed here simply to say that all the same rules apply when using <code>ggplot_plus</code>’s tools. You can set aesthetics globally or locally, and map them to constants or variables, and all the same behaviors will apply:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Species, </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length, </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> Species, <span class="co">#&lt;-- WE CAN SWITCH TO MAPPING FILL GLOBALLY SO IT APPLIES TO BOTH GEOMS. </span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> Petal.Length)) <span class="sc">+</span> <span class="co">#&lt;--NOW ALSO MAPPING COLOR</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"boxplot"</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span> <span class="co">#&lt;--WE LOCALLY OVERRIDE COLOR, SO IT'LL BE BLUE, NOT LINKED TO PETAL.LENGTH </span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"jitter"</span>) <span class="co">#&lt;--WE NO LONGER MAP FILL LOCALLY OR SET ALPHA TO A CONSTANT.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Scale for shape is already present.
Adding another scale for shape, which will replace the existing scale.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/same%20plot%20diff%20map-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The above examples demonstrate that many of the most common <code>ggplot</code> <code>geom</code>s are implemented for <code>geom_plus()</code> (though not all). A complete list of implemented <code>geom</code>s can be generated like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(geom_plus_defaults)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "point"      "jitter"     "count"      "boxplot"    "violin"    
 [6] "bar"        "col"        "histogram"  "line"       "freqpoly"  
[11] "segment"    "abline"     "hline"      "vline"      "curve"     
[16] "smooth"     "area"       "ribbon"     "crossbar"   "errorbar"  
[21] "linerange"  "pointrange" "density"    "dotplot"   </code></pre>
</div>
</div>
<p>If you are interested in seeing other base <code>ggplot2</code> <code>geom</code>s be implemented, let us know.</p>
</section>
</section>
<section id="improving-axes" class="level2">
<h2 class="anchored" data-anchor-id="improving-axes">Improving axes</h2>
<p>Returning to our scatterplot from earlier:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/return%20to%20scatter-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We still have some areas for improvement. One is with the axes titles and labels. We should first make the titles more human-readable, intuitive, and thorough by including units. We can do this using the <code>scale_*_*()</code> family functions in <code>ggplot2:</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>) <span class="co">#&lt;-- THE STANDARD WAY TO CHANGE THE X AXIS TITLE FOR A NUMERIC VARIABLE.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/normal%20scale-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This works, but you’ll notice that, by default, the axis fails to have axis labels at either end of the x axis. The <code>scale_x_continuous_plus()</code> function will attempt (if possible) to adjust the frequency of axis <strong>breaks</strong> (the values at which labels go) and the <strong>limits</strong> (the min and max values shown) automatically to ensure that breaks are regular and exist at or near the ends of the axes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>) <span class="co">#&lt;--SWITCHING TO THE PLUS VERSION</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/cont_plus-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The x axis limits have been expanded to include 1 and 7, and the breaks frequency has been changed to keep the steps as “pretty” as possible.</p>
<p>Notice that you can specify a <code>name</code> for the axis title in the <code>_plus()</code> version of the function just like in the regular <code>ggplot()</code> version. You can also specify values for other <code>scale</code> functions like <code>expand</code>, <code>transform</code>, and <code>labels</code>, if you want. You just can’t specify new <code>breaks</code> or <code>limits</code>, as the function is already trying to set those smartly for you, so if you try, this will return an error. If you want to set those parameters, using the plain <code>ggplot()</code> version.</p>
<p>In this particular case, the resulting labels are arguably more frequent than needed for the purpose, so we could suppress the labels (but keep the tick marks) for every other break like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="co">#&lt;--SPECIFYING A VECTOR OF CUSTOM LABELS THAT INCLUDES EMPTY STRINGS FOR EVERY OTHER VALUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/suppressing%20some%20labels-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>That would be optional, but perhaps a nice touch to reduce cognitive load and increase void space.</p>
<p>Logically, there’s a similar function for the y axis too:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="co">#&lt;--ADDED Y AXIS EQUIVALENT.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/y%20cont%20plus-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Now, the y axis limits have expanded to allow for a break at <code>4</code> so that the bottom end of the y axis has a label.</p>
</section>
<section id="improving-the-theme" class="level2">
<h2 class="anchored" data-anchor-id="improving-the-theme">Improving the theme</h2>
<p>A lot of <code>ggplot2</code>’s visual styling of graphs is controlled by its <code>theme</code> function. With well over 100 parameters, <code>theme()</code> is often a daunting function for <code>ggplot</code> beginners to learn.</p>
<p>As such, <code>ggplot_plus</code> features <code>theme_plus()</code>, a custom version of <code>theme()</code> that comes bundled with a bunch of default values meant to overcome some of the design challenges raised above:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span> </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>() <span class="co">#&lt;--ADDING CUSTOM DEFAULT THEME.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/theme_plus-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This version of the theme:</p>
<ul>
<li><p>Increases the size of all text elements to a more readable size.</p></li>
<li><p>Increases the spacing between text elements (e.g., legend keys, and the legend title and the rest of the legend).</p></li>
<li><p>Expands the size of axis tick marks.</p></li>
<li><p>Removes gridlines. [But these can be thoughtfully re-added; see next section].</p></li>
<li><p>Makes the background white for maximum contrast with foreground elements. [Note that, in some cases, white increases eye strain].</p></li>
<li><p>Adds y and x axis lines that are black and prominent for easy parsing. [Note that no top or right border lines are added by default, as these do not directly carry information in most cases.]</p></li>
<li><p>Moves the legend to a horizontal strip above the graph, where it takes up less room and is more likely to be immediately encountered by the average reader.</p></li>
<li><p>Makes all font black by default for maximum contrast against a white background (the default for some elements is a dark gray).</p></li>
</ul>
<p>All of these adjustments are easily overridden. Don’t like how thick the axis lines are? Prefer the legend where it normally is? No problem:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span> </span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>(<span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">linewidth =</span> <span class="fl">0.75</span>)) <span class="co">#&lt;--WE CAN MAKE THE LINES A LITTLE THINNER IF WE REALLY WANT TO.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/adj%20theme-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span> </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>(<span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">linewidth =</span> <span class="fl">0.75</span>),</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">legend.position =</span> <span class="st">"right"</span>,<span class="co">#&lt;--We CAN ALSO RESTORE THE RIGHT-SIDE LEGEND. </span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">legend.direction =</span> <span class="st">"vertical"</span>, </span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">margin =</span> <span class="fu">margin</span>(<span class="at">b =</span> <span class="dv">15</span>, <span class="at">r =</span> <span class="dv">0</span>)), <span class="co">#&lt;--...BUT I'D RECOMMEND MAKING A FEW SPACING ADJUSTMENTS IN THAT CASE.</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">legend.key.spacing.y =</span> <span class="fu">unit</span>(<span class="fl">0.5</span>, <span class="st">"cm"</span>)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>             ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/adj%20theme%202-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>So, <code>theme_plus()</code> exists, like the other tools in this toolkit, to be an informed starting point, not an ending point. If you don’t like aspects of the resulting design (and they certainly won’t work for every single graph type in every single contest!), you can change it.</p>
</section>
<section id="y-axis-title-orientation-and-location" class="level2">
<h2 class="anchored" data-anchor-id="y-axis-title-orientation-and-location">Y axis title orientation and location</h2>
<p>Our graph is looking pretty nice now, but there’s one remaining issue from earlier: the orientation and location of the y axis title. It’d be nice if it were horizontal and placed somewhere more prominent.</p>
<p>In base <code>ggplot2</code>, it is possible to re-orient the y axis like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal</span><span class="sc">\n</span><span class="st">length</span><span class="sc">\n</span><span class="st">(cm)"</span>) <span class="sc">+</span> <span class="co">#&lt;--INSERT SOME LINE BREAKS USING \n TO BREAK THE CURRENT TITLE ONTO MANY LINES FOR SPACE EFFICIENCY. </span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>(<span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">vjust =</span> <span class="fl">0.5</span>, <span class="at">angle =</span> <span class="dv">0</span>)) <span class="co">#&lt;--CHANGE THE Y AXIS TITLE TO BE VERTICALLY JUSTIFIED AND HORIZONTAL.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/change%20y%20axis%20title%20manual-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Admittedly, this doesn’t look too bad, nor is it too terribly difficult to achieve. However, it doesn’t scale well for long axis titles, it’s space-inefficient (taking away horizontal space that could instead be occupied by the data, and it still doesn’t place the title in the most prominent location possible.</p>
<p>The <code>yaxis_title_plus()</code> function is designed to relocate and reorient your y axis title to the top of the y axis line, left-justified to the edge of the graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span> <span class="co">#&lt;--NO NEED FOR ANY OTHER ADJUSTMENTS HERE</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>() <span class="sc">+</span> <span class="co">#&lt;--OR HERE.</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yaxis_title_plus</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/yaxis%20mover-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This reorientation and relocation of the y axis title has many potential benefits:</p>
<ul>
<li><p>It puts the title in a prominent location (most readers of a left-to-right, top-to-bottom language will begin here first).</p></li>
<li><p>It also orients the text horizontally for easy reading.</p></li>
<li><p>It’s still very associated with the y axis (it’d be hard to confuse it for anything else), and can now be <em>at least</em> as long as the graph is wide without taking up more than a single horizontal stripe of space.</p></li>
<li><p>By moving the title (and the legend!) out of the central “row” of the graph, the data now have as much horizontal room as possible.</p></li>
<li><p>Plus, for novice graph readers, this functions as a “pseudo-title.” Most graph designer do <strong>not</strong> like plot titles primarily because, typically, they do what the y axis title and/or caption would already do, only worse. However, by making the y axis title into something like a plot title, that redundancy is eliminated.</p></li>
</ul>
<p>While perhaps a tough sell for some, for what it’s worth, the data visualization community has been championing the relocated y axis title in publications dating back to the early 1990s, so this is not a fridge or new idea! Just remember that, while it’s recommended, this is an optional feature.</p>
</section>
<section id="thoughtful-gridlines" class="level2">
<h2 class="anchored" data-anchor-id="thoughtful-gridlines">Thoughtful gridlines</h2>
<p>Another contentious opinion of the <code>ggplot_plus</code> tools is the complete suppression of gridlines in the default theme. While these can of course be added back manually using <code>theme()</code> or <code>theme_plus()</code>, there’s an easier option: <code>gridlines_plus()</code>. This function reintroduces only faint, major gridlines running only in directions mapped to numeric variables (not discrete ones):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span> </span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>() <span class="sc">+</span> </span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yaxis_title_plus</span>() <span class="sc">+</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gridlines_plus</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/gridlines%20plus-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Research has shown that even very faint gridlines (the above are <code>gray90</code>) can still be effectively used by those who want or need them but are also relatively easily ignored by those who don’t want or need them, so ling as they aren’t too frequent, so they represent a good compromise.</p>
<p>For convenience, <code>linetype</code>, line <code>color</code>, and <code>linewidth</code> can be adjusted within <code>gridlines_plus()</code> if you want to make small changes.</p>
</section>
<section id="faceting" class="level2">
<h2 class="anchored" data-anchor-id="faceting">Faceting</h2>
<p>Faceting (breaking one graph into small multiples, i.e., functionally similar graphs of the same data divided by one or more discrete variables) is a major feature of ggplot2:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">#EXAMPLE GRAPH TO SHOW FACETING FEATURES:</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal</span><span class="sc">\n</span><span class="st">length</span><span class="sc">\n</span><span class="st">(cm)"</span>) <span class="sc">+</span> <span class="co">#&lt;--RE-EMPLOY THE LINE BREAK TRICK</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>(<span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>)) <span class="sc">+</span> <span class="co">#&lt;--TRICKS FOR LEFT-MARGIN Y AXIS TITLE POSITIONING. </span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># yaxis_title_plus() + #&lt;--LET'S COMMENT THIS OUT FOR NOW</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gridlines_plus</span>() <span class="sc">+</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> Species) <span class="sc">+</span> <span class="co">#&lt;--MAKE ONE SMALL MULTIPLE PANEL PER SPECIES (AS COLUMNS)</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="st">"none"</span>) <span class="co">#&lt;--SUPPRESS THE LEGEND, SINCE IT'S NOW REDUNDANT.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/faceting%20with%20geomplus-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As these resources demonstrate, all the features of <code>ggplot_plus</code> (mostly, probably) work with faceting, though not all of them would always make sense to use in the context of facets.</p>
<p>In particular, relocating the y axis title using <code>yaxis_title_plus()</code> is <em>possible</em>, but maybe not ideal:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>, </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> <span class="co">#&lt;--A DIFFERENT, SOMETIMES BETTER WAY TO SUPPRESS THE LEGEND</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span>  <span class="co">#&lt;--NORMAL</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>() <span class="sc">+</span> <span class="co">#&lt;--NORMAL</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yaxis_title_plus</span>() <span class="sc">+</span> <span class="co">#&lt;--ADDED BACK IN</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gridlines_plus</span>() <span class="sc">+</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> Species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in switch_axis_label(plot$plot, location = loc): Heads-up: The top y
axis title will be placed above any top strip labels on faceted graphs. This
may not be ideal; in these instances, I recommend moving your top facet strips
to the bottom. In facet_*(), specify "switch = 'x'" to do this. Alternatively,
consider faceting by rows rather than columns to place strips on the sides.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/facets%20and%20y%20axis%20title-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>You can see that the y axis title gets placed <em>above</em> the facet strip labels, which means it is not as close to the y axis as it probably ought to be.</p>
<p>There are two potential workarounds to this. The first would be to facet into rows rather than columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>, </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span>  </span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>() <span class="sc">+</span> </span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yaxis_title_plus</span>() <span class="sc">+</span> </span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gridlines_plus</span>() <span class="sc">+</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Species <span class="sc">~</span> .) <span class="co">#&lt;--FLOPPING THE ORDER WILL FACET INTO ROWS.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/plot%20as%20rows-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Another option would be to relocate the facet labels to the bottom of the graph so they aren’t competing with the relocated y axis title:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>, </span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span> </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span>  </span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>() <span class="sc">+</span> </span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yaxis_title_plus</span>() <span class="sc">+</span> </span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gridlines_plus</span>() <span class="sc">+</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> Species, <span class="at">switch =</span> <span class="st">"x"</span>) <span class="sc">+</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"segment"</span>, <span class="at">x =</span> <span class="cn">Inf</span>, <span class="at">xend =</span> <span class="sc">-</span><span class="cn">Inf</span>,<span class="at">y =</span> <span class="sc">-</span><span class="cn">Inf</span>,<span class="at">yend =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">linewidth =</span> <span class="fl">1.2</span>) <span class="co">#&lt;--A TRICK, IN THIS CASE, IS TO PUT A SEGMENT AT THE BOTTOM OF THE GRAPH SO IT LOOKS LIKE A TOP BORDER LINE FOR THE FACET STRIP LABELS</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/moving%20facet%20labels-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This also works, but perhaps suppressing the facet strip labels and retaining the legend is preferable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>, </span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">show.legend =</span> <span class="cn">TRUE</span>) <span class="sc">+</span> <span class="co">#&lt;--KEEP THE LEGEND. </span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span>  </span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>(<span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">strip.text =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> <span class="co">#&lt;--SUPPRESSING THE STRIP TEXT AND BACKGROUNDS.</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yaxis_title_plus</span>() <span class="sc">+</span> </span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gridlines_plus</span>() <span class="sc">+</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> Species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/retain%20legend-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="side-note-transparency-in-the-legend-keys" class="level3">
<h3 class="anchored" data-anchor-id="side-note-transparency-in-the-legend-keys">Side-note: Transparency in the legend keys</h3>
<p>You’ll notice that the legend keys (the circles in the legend) look exactly like the points in the plot in that they are also semi-transparent. The <code>alpha</code> setting is applying to them as well. This isn’t a <code>ggplot_plot</code> feature, but, in <code>ggplot2</code>, you can override how the legend keys are drawn in several ways. Here’s one:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species, </span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>                          <span class="at">alpha =</span> <span class="fl">0.2</span>)) <span class="sc">+</span> <span class="co">#&lt;--MAP INSIDE AES INSTEAD OF OUTSIDE IT, WHICH HELPS FOR MYSTERIOUS REASONS</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span>  </span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>(<span class="at">strip.background =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">strip.text =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span> </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yaxis_title_plus</span>() <span class="sc">+</span> </span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gridlines_plus</span>() <span class="sc">+</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(. <span class="sc">~</span> Species) <span class="sc">+</span></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha</span>(<span class="at">guide =</span> <span class="st">"none"</span>) <span class="co">#&lt;--DON'T INCLUDE A GUIDE FOR ALPHA. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/override%20aes-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="known-issues" class="level2">
<h2 class="anchored" data-anchor-id="known-issues">Known issues</h2>
<p>One known issue with <code>ggplot_plus</code>’s tools is a conflict between top x axis titles and the relocated y axis title created by <code>yaxis_title_plus()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co">#UNFACETED GRAPH WITH GRIDLINES</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>),</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>                          <span class="at">position =</span> <span class="st">"top"</span>) <span class="sc">+</span> <span class="co">#&lt;--MOVE THE X AXIS TO THE TOP OF THE GRAPH</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span> </span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>() <span class="sc">+</span> </span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yaxis_title_plus</span>() <span class="sc">+</span></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gridlines_plus</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in switch_axis_label(plot$plot, location = loc): Heads-up: The top y
axis title is likely to clip overtop of the x axis labels if your graph
features a top x axis. Move the x axis to the bottom using "position = 'top'"
in scale_x_*() (or remove the secondary x axis). Alternatively, set "location =
'bottom'" in switch_y_axis().</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/yaxis%20top%20conflict-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>As you can see, the y axis title will be located to the same functional “row” as the top x axis labels, so they will clip into each other.</p>
<p>In instances where a top x axis is desirable (which is probably uncommon but might happen occasionally), <code>yaxis_title_plus()</code> features a <code>location</code> argument that can be set to “bottom” to move the y axis title to the equivalent location at the bottom of the graph instead:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species),</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">alpha =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>),</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>                          <span class="at">position =</span> <span class="st">"top"</span>) <span class="sc">+</span> </span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span> </span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>(<span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">vjust =</span> <span class="fl">0.75</span>)) <span class="sc">+</span> <span class="co">#&lt;--READJUST THE VERTICAL POSITIONING OF THIS ELEMENT </span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yaxis_title_plus</span>(<span class="at">location =</span> <span class="st">"bottom"</span>) <span class="sc">+</span> <span class="co">#&lt;--MOVE THE Y AXIS TITLE TO THE BOTTOM INSTEAD</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gridlines_plus</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/y%20axis%20bottom-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This looks a little odd/backwards to me, but it works!</p>
<p>If you duplicate the x axis such that it appears on <em>both</em> the top <em>and</em> bottom of the graph, there’s no recourse for adjusting the relocated y axis title in that case. At that point, breaking a horizontally oriented y axis onto many lines may be best.</p>
<section id="idealized-scatterplot-for-reference" class="level3">
<h3 class="anchored" data-anchor-id="idealized-scatterplot-for-reference">Idealized scatterplot for reference</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris,</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> Petal.Length, </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> Sepal.Length)) <span class="sc">+</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_plus</span>(<span class="at">geom =</span> <span class="st">"point"</span>, </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">fill =</span> Species, <span class="at">alpha =</span> <span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Petal length (cm)"</span>, </span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>                          <span class="at">labels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">""</span>, <span class="dv">3</span>, <span class="st">""</span>, <span class="dv">5</span>, <span class="st">""</span>, <span class="dv">7</span>)) <span class="sc">+</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous_plus</span>(<span class="at">name =</span> <span class="st">"Sepal length (cm)"</span>) <span class="sc">+</span> </span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_plus</span>() <span class="sc">+</span> </span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">yaxis_title_plus</span>() <span class="sc">+</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gridlines_plus</span>() <span class="sc">+</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha</span>(<span class="at">guide =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Guide-to-ggplot_plus_files/figure-html/idealized%20graph-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>